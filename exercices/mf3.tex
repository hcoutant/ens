# These definitions are overriden by the top-level makefile
# You shouldn't have to modify this file.

CCOPT         = -g
LDOPT         = -g
CC            = cc -Ae
TCLCFLAGS     = -I/usr/local/tcl/include
TCLLFLAGS     = -L/usr/local/tcl/lib

LIBDIR        = ../lib
CFLAGS        = -I$(LIBDIR) $(CCOPT)
LDFLAGS       = $(LDOPT)
LIBDEMO       = $(LIBDIR)/libdemo.a
LIBTCL        = $(TCLLFLAGS) -ltcl

PRGM          = $(PRGM1) $(PRGM2)
HDRS          = $(HDRS1) $(HDRS2)
SRCS          = $(SRCS1) $(SRCS2)
OBJS          = $(OBJS1) $(OBJS2)

PRGM1         = demo
SRCS1         = demo.c pcc.c
HDRS1         = $(LIBDIR)/lib.h $(LIBDIR)/max.h
OBJS1         = demo.o pcc.o
LIBS1         = $(LIBDEMO)
SYSL1         = $(LIBTCL) -lm

PRGM2         = comp
SRCS2         = comp.c
HDRS2         = $(LIBDIR)/lib.h $(LIBDIR)/max.h
OBJS2         = comp.o
LIBS2         = $(LIBDEMO)
SYSL2         = 

all:            $(PRGM)

$(PRGM1):       $(OBJS1) $(LIBS1)
                $(CC) $(LDFLAGS) $(OBJS1) $(LIBS1) -o $(PRGM1) $(SYSL1)

$(PRGM2):       $(OBJS2) $(LIBS2)
                $(CC) $(LDFLAGS) $(OBJS2) $(LIBS2) -o $(PRGM2) $(SYSL2)

clean:
                rm -f $(OBJS) $(PRGM) core core.* tags

tags:           $(HDRS) $(SRCS)
                ctags $(HDRS) $(SRCS)

#
demo.o:         $(LIBDIR)/lib.h $(LIBDIR)/max.h
                $(CC) -c $(CFLAGS) $(TCLCFLAGS) demo.c
comp.o:         $(LIBDIR)/lib.h $(LIBDIR)/max.h
pcc.o:          $(LIBDIR)/lib.h
